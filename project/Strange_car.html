<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Project</title>
    <link rel="stylesheet" href="./style.css">
    <script defer src="./controll.js"></script>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.5.2/dist/aframe-extras.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.5.2/dist/aframe-extras.min.js"></script>
</head>

<body>
    <a-scene>

        <!-- Pop-up window -->
        <div id="popup" class="popup">
            <button class="close-btn" onclick="closePopup()">X</button>
            <h3 id="popup-title">Car Details</h3>
            <p id="popup-model"></p>
            <p id="popup-year"></p>
            <p id="popup-price"></p>
            <p id="popup-color"></p>
            <p class="esc-hint">*Click the car model again to close the popup.</p>
        </div>


        <!-- ประตูวาร์ป 1: ไปที่ Hall.html -->
        <a-entity rotation="0 180" position="0 0 5.5" portal-one static-body>
            <!-- <a-box position="1.5 1.5 0" width="0.5" height="3" depth="0.2" color="#8B4513" static-body></a-box>
            <a-box position="-1.5 1.5 0" width="0.5" height="3" depth="0.2" color="#8B4513" static-body></a-box>
            <a-box position="0 3 0" width="3.5" height="0.5" depth="0.2" color="#8B4513" static-body></a-box> -->
            <a-box position="0 1.5 -0.5" width="2.8" height="3.2" depth="0.1" material="opacity: 0.2; color: orange"
                static-body>
                <!-- <a-light type="point" intensity="0.5" color="#4B0082" position="0 0 0"></a-light> -->
            </a-box>
            <!-- กรอบข้อความ -->
            <a-box position="0 4.5 -0.75" depth="0.1" width="3.5" height="1.2" color="black" material="opacity: 0.8">
            </a-box>

            <!-- ข้อความ -->
            <a-text value="Walk through to Hall." position="0 4.5 -0.65" align="center" color="white"
                scale="1.2 1.2 1.2">
            </a-text>
        </a-entity>
        <!-- กรอบประตู-->
        <a-entity gltf-model="./models/decorate/Sci Fi Gate 3D Model.glb" rotation="0 0 0" position="0.75 0 6.25"
            scale="0.3 0.25 0.25">
        </a-entity>

        <!-- รถแปลกๆ -->
        <a-entity id="car1" gltf-model="./models/strange_car/Buggy 3D Model by Nick Slough.glb" position="40 1.3 -15"
            rotation="0 45 0" scale="2 2 2" class="clickable" data-model="Buggy 3D Model" data-year="2022"
            data-price="$25,000 USD" data-color="Orange"></a-entity>

        <a-entity id="moto4" gltf-model="./models/showroom/Podium 3D Model by Maks Art22.glb" position="40 -0.5 -5"
            scale="10 10 10"></a-entity>

        <a-entity id="car2" gltf-model="./models/strange_car/Low Poly Truck Drifter.glb" position="30 0.7 -15"
            rotation="0 -135 0" scale="0.01 0.01 0.01" class="clickable" data-model="Low Poly Truck Drifter"
            data-year="2020" data-price="$15,000 USD" data-color="Orange"></a-entity>

        <a-entity id="moto4" gltf-model="./models/showroom/Podium 3D Model by Maks Art22.glb" position="30 -0.5 -5"
            scale="10 10 10"></a-entity>

        <a-entity id="car3" gltf-model="./models/strange_car/Car 3D Model by Cuadot.glb" position="20 0.2 -15"
            rotation="0 -45 0" scale="1.2 1.2 1.2" class="clickable" data-model="Car 3D Model by Cuadot"
            data-year="2021" data-price="$10,000 USD" data-color="Light-Ggreen"></a-entity>

        <a-entity id="moto4" gltf-model="./models/showroom/Podium 3D Model by Maks Art22.glb" position="20 -0.5 -5"
            scale="10 10 10"></a-entity>

        <a-entity id="car4" gltf-model="./models/strange_car/Old Rusty Car.glb" position="10 0.5 -15" rotation="0 -45 0"
            scale="0.01 0.01 0.01" class="clickable" data-model="Old Rusty Car" data-year="1978" data-price="$3,000 USD"
            data-color="Rusty Brown"></a-entity>

        <a-entity id="moto4" gltf-model="./models/showroom/Podium 3D Model by Maks Art22.glb" position="10 -0.2 -5"
            scale="10 10 10"></a-entity>

        <a-entity id="car5" gltf-model="./models/strange_car/Cybertruck.glb" position="0 1 -15" rotation="0 0 0"
            scale="2 2 2" class="clickable" data-model="Cybertruck" data-year="2023" data-price="$60,000 USD"
            data-color="Silver"></a-entity>

        <a-entity id="moto4" gltf-model="./models/showroom/Podium 3D Model by Maks Art22.glb" position="0 -0.5 -5"
            scale="10 10 10"></a-entity>

        <a-entity id="car6" gltf-model="./models/strange_car/McQueen 3D Model.glb" position="-10 0.2 -15"
            rotation="0 45 0" scale="1.5 1.5 1.5" class="clickable" data-model="McQueen" data-year="2015"
            data-price="$20,000 USD" data-color="Red"></a-entity>

        <a-entity id="moto4" gltf-model="./models/showroom/Podium 3D Model by Maks Art22.glb" position="-10 -0.5 -5"
            scale="10 10 10"></a-entity>

        <a-entity id="car7" gltf-model="./models/strange_car/Chevrolet Camaro 3D Model.glb" position="-20 -0.2 -15"
            rotation="0 45 0" scale="1.5 1.5 1.5" class="clickable" data-model="Chevrolet Camaro" data-year="2020"
            data-price="$40,000 USD" data-color="Red"></a-entity>

        <a-entity id="moto4" gltf-model="./models/showroom/Podium 3D Model by Maks Art22.glb" position="-20 -0.5 -5"
            scale="10 10 10"></a-entity>

        <a-entity id="car8" gltf-model="./models/strange_car/Nissan GTR 3D Model.glb" position="-30 1.1 -15"
            rotation="0 45 0" scale="1 1 1" class="clickable" data-model="Nissan GTR" data-year="2022"
            data-price="$100,000 USD" data-color="Blue"></a-entity>

        <a-entity id="moto4" gltf-model="./models/showroom/Podium 3D Model by Maks Art22.glb" position="-30 -0.5 -5"
            scale="10 10 10"></a-entity>

        <a-entity id="car9" gltf-model="./models/strange_car/1994 Nissan 180MX 3D Model.glb" position="-40 1.1 -15"
            rotation="0 56 0" scale="0.5 0.5 0.5" class="clickable" data-model="1994 Nissan 180MX" data-year="1994"
            data-price="$8,000 USD" data-color="Red"></a-entity>

        <a-entity id="moto4" gltf-model="./models/showroom/Podium 3D Model by Maks Art22.glb" position="-40 -0.5 -5"
            scale="10 10 10"></a-entity>

        <!-- ตกแต่ง -->
        <a-entity gltf-model="./models/decorate/Red_Carpet_3D_Model.glb" rotation="0 270 0" position="0 0.045 0"
            scale="3.5 0.5 0.3">
        </a-entity>
        <a-entity gltf-model="./models/decorate/Red_Carpet_3D_Model.glb" rotation="0 0 0" position="0 0.04 -9"
            scale="15.5 0.5 0.3">
        </a-entity>

        <a-asset-item id="rabbit" src="./models/decorate/Rabbit-Cyan-Hair.glb"></a-asset-item>
        <a-asset-item id="rabbit2" src="./models/decorate/Rabbit Grey.glb"></a-asset-item>
        <a-asset-item id="rabbit3" src="./models/decorate/Rabbit with Pigtails (1).glb"></a-asset-item>
        <!-- Rabbit -->
        <a-entity gltf-model="#rabbit" position="5 0 -5" rotation="0 -50 0" scale="0.45 0.45 0.45"
            animation-mixer="clip: CharacterArmature|CharacterArmature|CharacterArmature|Sitting_Idle; timeScale: 1"
            class="interactive" data-name="Rabbit Cyan Hair" data-message="I can't decide what to look at!">
        </a-entity>
        <a-entity gltf-model="#rabbit2" position="3.5 0 -5" rotation="0 60 0" scale="0.45 0.45 0.45"
            animation-mixer="clip: CharacterArmature|CharacterArmature|CharacterArmature|No; timeScale: 0.35"
            class="interactive" data-name="Rabbit Grey" data-message="I'm so hungry!">
        </a-entity>
        <a-entity id="rabbit-runner" gltf-model="#rabbit3" position="-28 0 -8.5" rotation="0 60 0"
            scale="0.45 0.45 0.45"
            animation-mixer="clip: CharacterArmature|CharacterArmature|CharacterArmature|Run; timeScale: 1"
            class="interactive" data-name="Rabbit with Pigtails" data-message="I'm so excited about the cars!">
        </a-entity>


        <!-- Booth -->
        <a-entity gltf-model="./models/booth/MetaFactory Booth 3D Model.glb" rotation="0 270 0"
            position="-37.9 0.04 1.1" scale="1 1 1">
        </a-entity>
        <a-entity gltf-model="./models/booth/Exhibition Booth 3D Model.glb" rotation="0 180 0"
            position="46.55 0.04 -3.3" scale="2 2 2">
        </a-entity>


        <!-- car showroom -->
        <a-entity gltf-model="./models/showroom/car-showroom_2.glb" rotation="0 0 0" position="0 0 -10"
            scale="3.5 4 1.25"></a-entity>

        <!-- Camera with Enhanced Controls -->
        <a-entity position="0 0.5 0" rotation="0 0 0">
            <a-camera look-controls="pointerLockEnabled: true" wasd-controls>
                <a-cursor color="#FFFFFF"
                    animation__click="property: scale; from: 0.1 0.1 0.1; to: 1 1 1; dur: 150; startEvents: click"></a-cursor>
            </a-camera>
        </a-entity>

        <!-- เพิ่มแสง Ambient -->
        <a-light type="ambient" intensity="0.6" color="#ffffff"></a-light>

        <!-- เพิ่มแสง Directional -->
        <a-light type="directional" position="5 10 5" intensity="1" color="#ffffff"></a-light>

        <!-- เพิ่มแสง Point -->
        <a-light type="point" position="0 3 0" intensity="2" color="#ffffff"></a-light>
        <!-- เพลงพื้นหลัง -->
        <audio id="background-audio" autoplay loop>
            <source src="./sound/sound background/Relaxing Music.mp3" type="audio/mpeg">
        </audio>
    </a-scene>

    <!-- Dialog box -->
    <div id="dialog-box" class="dialog-box">
        <div id="character-name" class="character-name"></div>
        <div id="dialog-text" class="dialog-text"></div>
    </div>

    <!-- Scripts -->
    <script src="dialogbox.js"></script>
    <script>
        ////////////////////// ฟังก์เพลงพื้นหลัง ////////////////////////////
        // เข้าถึงแท็ก <audio>
        const backgroundAudio = document.getElementById('background-audio');

        // ตั้งค่าเสียง (ค่าระหว่าง 0.0 ถึง 1.0)
        backgroundAudio.volume = 0.02; // ลดระดับเสียงลง 50%
        // backgroundAudio.muted = true; // ปิดเสียง
        // ฟังก์ชันประตู 1
        AFRAME.registerComponent('portal-one', {
            init: function () {
                this.camera = document.querySelector('a-camera');
                this.portalActivated = false;
                this.raycaster = new THREE.Raycaster();
                this.raycaster.far = 1;
            },

            tick: function () {
                if (this.portalActivated || !this.camera) return;

                const cameraPosition = this.camera.object3D.position;
                const cameraDirection = new THREE.Vector3();
                this.camera.object3D.getWorldDirection(cameraDirection);

                this.raycaster.ray.origin.copy(cameraPosition);
                this.raycaster.ray.direction.copy(cameraDirection);

                const intersects = this.raycaster.intersectObject(this.el.object3D, true);

                if (intersects.length > 0.1) {
                    console.log('Portal One activated!');
                    this.portalActivated = true;
                    window.location.replace('Hall.html'); // เปลี่ยนหน้าไปยัง Beautiful_car.html
                }
            }
        });

        //rabbit run
        const rabbit = document.querySelector('#rabbit-runner');
        let direction = 1; // กำหนดทิศทาง (1 = ไปข้างหน้า, -1 = ย้อนกลับ)
        const speed = 0.05; // ความเร็ว
        const maxX = 32; // ขอบเขตด้านขวา
        const minX = -28; // ขอบเขตด้านซ้าย

        function moveRabbit() {
            const position = rabbit.object3D.position;

            // เคลื่อนที่ในแกน X
            position.x += speed * direction;

            // ตรวจสอบขอบเขต
            if (position.x >= maxX || position.x <= minX) {
                direction *= -1; // เปลี่ยนทิศทาง
                // เปลี่ยน rotation ตามทิศทาง
                rabbit.setAttribute('rotation', `0 ${direction === 1 ? 120 : -120} 0`);
            }

            requestAnimationFrame(moveRabbit); // เรียกฟังก์ชันซ้ำ
        }

        moveRabbit(); // เริ่มการเคลื่อนไหว

    </script>
</body>

</html>

<!-- https://www.cgtrader.com/items/5444846/download-page -->

<!-- https://poly.pizza/m/1jB8I4t5w4 -->

<!-- Chevrolet Camaro -->
<!-- https://poly.pizza/m/kVcKsd2dEk -->

<!-- https://www.cgtrader.com/items/3631502/download-page -->

<!-- Buggy -->
<!-- https://poly.pizza/m/eZ_13w7qZh7 -->

<!-- Nissan GTR -->
<!-- https://poly.pizza/m/a_HKCtYAv2W -->

<!-- 1994 Nissan 180MX -->
<!-- https://poly.pizza/m/c7vlPQ8dlt -->

<!-- Lamboghini -->
<!-- https://poly.pizza/m/5zUWP5UsLg- -->

<!-- < https://www.cgtrader.com/items/3070191/download-page  -->

<!-- AUDI R8 2017 -->
<!-- https://www.cgtrader.com/items/3262252/download-page -->

<!-- Kawasaki Ninja H2 -->
<!-- https://sketchfab.com/3d-models/kawasaki-ninja-h2-free-0ab38d6e39664b25bfaf9f5c3e0c767c -->

<!-- Porsche 911 Carrera 4S -->
<!-- https://sketchfab.com/3d-models/free-porsche-911-carrera-4s-d01b254483794de3819786d93e0e1ebf -->

<!-- Alfa Romeo Stradale 1967 -->
<!-- https://sketchfab.com/3d-models/alfa-romeo-stradale-1967-fbb6adc7a6e84c3db6969e1debcd364b -->


<!-- รถยนต์ -->
<!-- McLaren F1 1993 -->
<!-- https://sketchfab.com/3d-models/mclaren-f1-1993-by-alexka-294df724d96241cdbe0e0f3c91ad7fce -->

<!-- 2005 Lamborghini Murciélago -->
<!-- https://sketchfab.com/3d-models/2005-lamborghini-murcielago-8313bb623c62469d9a44e0b733b550d2 -->

<!-- 2022 Lamborghini Huracán Super Trofeo EVO2 -->
<!-- https://sketchfab.com/3d-models/2022-lamborghini-huracan-super-trofeo-evo2-carb-e42420a3b48548439571f748b5094661 -->

<!-- 2020 Ford Shelby Super Snake -->
<!-- https://sketchfab.com/3d-models/2020-ford-shelby-super-snake-d622935bf46d40b5a4a7c8abdd7cb3a7 -->

<!-- 2011 Bugatti Veyron Super Sport -->
<!-- https://sketchfab.com/3d-models/2011-bugatti-veyron-super-sport-b2eecbbc2dcd41e68494e33af6882e00 -->

<!-- lamborghini-invencible -->
<!-- https://sketchfab.com/3d-models/2023-lamborghini-invencible-fec27b57fb4c4d3d9615645907b8452c -->

<!-- Tesla Roadster 2020 -->
<!-- https://sketchfab.com/3d-models/tesla-roadster-2020-1fbf29e297bd4a17ac39a00a378441d8 -->

<!-- nissan-gt-r-nismo -->
<!-- https://sketchfab.com/3d-models/2024-nissan-gt-r-nismo-20a14338df064c06a3606bab6894adbc -->

<!-- porsche-911 -->
<!-- https://www.cgtrader.com/free-3d-models/car/car/porsche-911-turbo-dbf196eb-4215-48eb-a370-2670d1a44d45 -->

<!-- showroom1 -->
<!-- https://sketchfab.com/3d-models/car-showroom-1-40b0ae06eb8343e5bacf34e04fcfff73#download -->

<!-- Low-poly truck (car "Drifter") -->
<!-- https://sketchfab.com/3d-models/low-poly-truck-car-drifter-f3750246b6564607afbefc61cb1683b1 -->

<!-- Car -->
<!-- https://sketchfab.com/3d-models/car-acccd15d4e454399a39dbe40f4f6df71 -->

<!-- Bottled car -->
<!-- https://sketchfab.com/3d-models/bottled-car-cd38a415db8a4607ab9dd3cc67d27462 -->

<!-- Old Rusty Car -->
<!-- https://sketchfab.com/3d-models/old-rusty-car-95baa20ebc5d4d2e869f0b549be838fe -->

<!-- มอไซค์ -->

<!-- Yamaha Vino -->
<!-- https://sketchfab.com/3d-models/vino-2205f4e69bc64df3aab03c71ab9d7492 -->

<!-- lightcycle-tron -->
<!-- https://sketchfab.com/3d-models/lightcycle-tron-evolution-59b2d85a6fef416c9419a92f680e6abd -->

<!-- McQueen -->
<!-- https://www.cgtrader.com/items/5690548/download-page -->


<!-- ferrari-f40-lm -->
<!-- https://sketchfab.com/3d-models/1989-ferrari-f40-lm-8f67f3c0bbcc4e7084ee7f49cab9c7db -->

<!-- 2019 Bugatti Divo -->
<!-- https://sketchfab.com/3d-models/2019-bugatti-divo-7849e9f9cf2347c28fb5e41b1629991c -->

<!-- 2021 Pagani Imola -->
<!-- https://sketchfab.com/3d-models/2021-pagani-imola-41d59a9e413944ba82e4a230db4c170c -->

<!-- 2021 Maserati MC20 -->
<!-- https://sketchfab.com/3d-models/2021-maserati-mc20-6811b291cda74d468fab04298029135f -->

<!-- Aston Martin F1 AMR23 2023 -->
<!-- https://sketchfab.com/3d-models/aston-martin-f1-amr23-2023-f6ba825a43b146a9b669934a4e1fd529 -->

<!-- 2018 Lotus Evora GT430 -->
<!-- https://sketchfab.com/3d-models/2018-lotus-evora-gt430-aa58af64c5a74660b06ca517e8c7f50e -->

<!-- moto guzzi v-twin -->
<!-- https://sketchfab.com/3d-models/moto-guzzi-v-twin-923c2932481141c8a1966d427a5d3b30 -->

<!-- Yamaha 500 custom motorbike -->
<!-- https://sketchfab.com/3d-models/yamaha-500-custom-motorbike-48919202c90e4a4096714eaadf6769a3 -->


<!-- Harley-Davidson Seventy-Two HD FXT 2015❤️ -->
<!-- https://sketchfab.com/3d-models/harley-davidson-seventy-two-hd-fxt-2015-15e67a3076494bb99ba7504c9913ceb5 -->

<!-- 1979 PA-50 50 cc Honda Hobbit Moped -->
<!-- https://sketchfab.com/3d-models/1979-pa-50-50-cc-honda-hobbit-moped-a1b186f04d4b4654ab81b0d829007312 -->


<!-- newcar ยังไม่โหลด -->